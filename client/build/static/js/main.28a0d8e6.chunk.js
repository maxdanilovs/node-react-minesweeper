(this["webpackJsonpnode-minesweeper"]=this["webpackJsonpnode-minesweeper"]||[]).push([[0],{19:function(e,a,t){e.exports=t.p+"static/media/sad.2d09f7da.png"},20:function(e,a,t){e.exports=t.p+"static/media/smile.0cc72ca4.png"},21:function(e,a,t){e.exports=t.p+"static/media/sunglasses.39c83107.png"},22:function(e,a,t){e.exports=t.p+"static/media/clock.5e80d465.png"},23:function(e,a,t){e.exports=t.p+"static/media/minesweeper_logo.95751f94.png"},24:function(e,a,t){e.exports=t(51)},46:function(e,a,t){},47:function(e,a,t){},48:function(e,a,t){},49:function(e,a,t){},50:function(e,a,t){},51:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),o=t(17),r=t.n(o),l=t(2),s=t(18),u=t(7),i=t(4),m=function(e,a){switch(a.type){case"NEW_GAME":return function(e){var a=document.getElementById("game-container");a.removeAttribute("class"),a.classList.add("".concat(e,"-container"))}(a.payload.gameMode),Object(i.a)({},e,{columns:a.payload.cols,mines:a.payload.mines,gameMode:a.payload.gameMode,gameStatus:"stopped",gameBoard:f(a.payload.rows,a.payload.cols)});case"DISPLAY_RECORDS":return Object(i.a)({},e,{recordList:a.payload});case"OPEN_FIELD":return Object(i.a)({},e,{gameStatus:"stopped"===e.gameStatus?"gameon":e.gameStatus,gameBoard:d(e.gameBoard,a.payload)});case"PLACE_FLAG":var t=a.payload,n=t.fieldId,c=t.flagged,o=function(e,a,t){var n,c=Object(u.a)(e),o=1,r=Object(s.a)(c);try{for(r.s();!(n=r.n()).done;){var l=n.value;if(l.id===a){l.flagged=t,l.flagged&&(o=-1);break}}}catch(i){r.e(i)}finally{r.f()}return{board:c,mine:o}}(e.gameBoard,n,c),r=o.board,l=o.mine;return Object(i.a)({},e,{mines:e.mines+l,gameBoard:r});case"LOST_GAME":return Object(i.a)({},e,{gameStatus:"lost",gameBoard:p(e.gameBoard,a.payload)});case"WON_GAME":return Object(i.a)({},e,{gameStatus:"won",time:a.payload});default:return e}};function d(e,a){var t=Object(u.a)(e);return t.forEach((function(e){a.forEach((function(a){e.id===a.id&&(e.status=a.minesAround)}))})),t}function p(e,a){var t=Object(u.a)(e);return t.forEach((function(e){a.forEach((function(a){e.id===a.id&&(e.status=a.minesAround,a.mine&&(e.status="mine"),a.opened&&a.mine&&(e.status+=" red"))}))})),t}function f(e,a){for(var t=[],n=1;n<=e*a;n++)t.push({id:n,status:"unopened",flagged:!1});return t}var g=t(3),E=t.n(g),v={gameBoard:[],recordList:[],columns:0,mines:0,time:0,gameMode:"easy",gameStatus:"stopped"},b=Object(n.createContext)(v),y=function(e){var a=e.children,t=Object(n.useReducer)(m,v),o=Object(l.a)(t,2),r=o[0],s=o[1];function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.gameMode;E.a.all([E.a.post("/games/new_game",{gameMode:e}),E.a.post("/records/",{gameMode:e})]).then((function(e){s({type:"NEW_GAME",payload:e[0].data.boardParams}),s({type:"DISPLAY_RECORDS",payload:e[1].data.records})})).catch((function(e){return console.log(e)}))}return Object(n.useEffect)((function(){u("easy")}),[]),c.a.createElement(b.Provider,{value:{gameBoard:r.gameBoard,columns:r.columns,mines:r.mines,gameStatus:r.gameStatus,time:r.time,recordList:r.recordList,gameMode:r.gameMode,handleFieldOpening:function(e){E.a.post("/games/handle_left_click",{fieldId:e}).then((function(e){var a=e.data,t=a.gameStatus,n=a.board,c=a.recordTime;s(-1===t?{type:"LOST_GAME",payload:n}:1===t?{type:"WON_GAME",payload:c}:{type:"OPEN_FIELD",payload:n})})).catch((function(e){return console.log(e)}))},handleFlag:function(e){E.a.post("/games/handle_right_click",{fieldId:e}).then((function(e){s({type:"PLACE_FLAG",payload:{fieldId:e.data.fieldId,flagged:e.data.flagged}})})).catch((function(e){return console.log(e)}))},handleClearance:function(e){E.a.post("/games/handle_clearance",{fieldId:e}).then((function(e){var a=e.data,t=a.gameStatus,n=a.board,c=a.recordTime;s(-1===t?{type:"LOST_GAME",payload:n}:1===t?{type:"WON_GAME",payload:c}:{type:"OPEN_FIELD",payload:n})})).catch((function(e){return console.log(e)}))},startNewGame:u}},a)};var O=function(){var e=Object(n.useContext)(b),a=e.startNewGame,t=e.recordList,o=e.gameMode,r=Object(n.useState)(!1),s=Object(l.a)(r,2),u=s[0],i=s[1];function m(e){e.preventDefault(),a(e.target.value)}return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"".concat(u?"show":""," ").concat(o),id:"records"},c.a.createElement("ol",null,t.map((function(e){return c.a.createElement("li",{key:e._id},c.a.createElement("div",null,c.a.createElement("p",null,e.name),c.a.createElement("p",null,e.recordTime)))})))),c.a.createElement("div",{className:"navbar"},c.a.createElement("button",{className:"records-btn ".concat(o," ").concat(u?"active":""),onClick:function(e){e.preventDefault(),i(!u)}},u?"Hide Records":"Show Records"),c.a.createElement("h1",{className:"navbar-brand"},"Minesweeper"),c.a.createElement("div",{className:"navbar-game-mode"},c.a.createElement("button",{className:"easy ".concat("easy"===o?"active":""),onClick:m,value:"easy"},"Easy"),c.a.createElement("button",{className:"pro ".concat("pro"===o?"active":""),onClick:m,value:"pro"},"Pro"),c.a.createElement("button",{className:"expert ".concat("expert"===o?"active":""),onClick:m,value:"expert"},"Expert"))))},h=c.a.memo((function(e){var a=e.id,t=e.status,o=e.flagged,r=Object(n.useContext)(b),l=r.handleFieldOpening,s=r.handleFlag,u=r.handleClearance,i=r.mines;return c.a.createElement(c.a.Fragment,null,c.a.createElement("td",null,c.a.createElement("span",{className:o?"flagged":"mines-".concat(t),onClick:function(e){e.preventDefault(),"unopened"!==t||o||l(a)},onContextMenu:function(e){e.preventDefault(),"unopened"!==t||0===i&&!o||s(a)},onMouseDown:function(e){e.preventDefault(),"unopened"!==t&&(4!==e.buttons&&3!==e.buttons||u(a))}})))}));var N=function(){var e=Object(n.useContext)(b),a=e.gameBoard,t=e.columns,o=e.gameMode;return c.a.createElement("div",null,c.a.createElement("table",{className:"minesweeper ".concat(o,"-size")},c.a.createElement("tbody",null,function(e){var t=[],n=[],o=0;return a.forEach((function(a){t.push(c.a.createElement(h,{key:a.id,id:a.id,status:a.status,flagged:a.flagged})),(o+=1)===e&&(n.push(c.a.createElement("tr",{key:a.id},t)),t=[],o=0)})),n}(t))))},j=t(19),S=t.n(j),C=t(20),M=t.n(C),_=t(21),k=t.n(_),w=t(22),x=t.n(w),L=t(23),A=t.n(L);var I=function(){var e,a=Object(n.useContext)(b),t=a.gameStatus,o=a.mines,r=a.startNewGame,s=Object(n.useState)(0),u=Object(l.a)(s,2),i=u[0],m=u[1],d=Object(n.useState)(0),p=Object(l.a)(d,2),f=p[0],g=p[1];return Object(n.useEffect)((function(){"gameon"===t?g(setInterval((function(){m((function(e){return e+1}))}),1e3)):"stopped"===t?(clearInterval(f),m(0)):clearInterval(f)}),[t]),c.a.createElement("div",{className:"timer-counter"},c.a.createElement("div",{className:"tc-display"},c.a.createElement("img",{src:x.a,className:"clock",alt:""}),c.a.createElement("p",{className:""},i<10?"0".concat(i):i)),c.a.createElement("div",{className:"tc-display"},c.a.createElement("img",{src:(e=t,"won"===e?k.a:"lost"===e?S.a:M.a),alt:"Restart",className:"emoji",onClick:function(){return r()}})),c.a.createElement("div",{className:"tc-display"},c.a.createElement("img",{src:A.a,alt:""}),c.a.createElement("p",{className:""},o)))};var D=function(){var e=Object(n.useContext)(b),a=e.gameStatus,t=e.time,o=e.startNewGame,r=Object(n.useState)(""),s=Object(l.a)(r,2),u=s[0],i=s[1],m=Object(n.useState)(!1),d=Object(l.a)(m,2),p=d[0],f=d[1];function g(e){e.preventDefault(),f(!1)}return Object(n.useEffect)((function(){"won"===a&&(f(!0),document.getElementById("modal-input").focus())}),[a]),c.a.createElement("div",{id:"modal-background",className:p?"active":""},c.a.createElement("div",{id:"modal-container",className:p?"active":""},c.a.createElement("span",{onClick:g,className:"close"}),c.a.createElement("div",{className:"modal-content"},c.a.createElement("h1",null,"You Win!"),c.a.createElement("h2",null,"Your time: ",t," seconds"),c.a.createElement("form",null,c.a.createElement("input",{type:"text",id:"modal-input",onChange:function(e){i(e.target.value)},value:u,placeholder:"enter your name"}),c.a.createElement("input",{type:"submit",onClick:function(e){e.preventDefault(),E.a.post("/records/create",{name:u}).then((function(e){console.log(e),o()})),f(!1),i("")},value:"Save Record"})),c.a.createElement("br",null),c.a.createElement("button",{onClick:g,className:"restart-button"},"Restart Game"))))};var G=function(){return c.a.createElement(y,null,c.a.createElement("div",{className:"app"},c.a.createElement(O,null),c.a.createElement("div",{id:"game-container",onContextMenu:function(e){return e.preventDefault()}},c.a.createElement(I,null),c.a.createElement(N,null)),c.a.createElement(D,null)))};t(46),t(47),t(48),t(49),t(50);r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(G,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.28a0d8e6.chunk.js.map